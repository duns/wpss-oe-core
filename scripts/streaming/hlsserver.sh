#!/bin/bash
export LD_LIBRARY_PATH="$LD_LIBRARY_PATH:/usr/local/lib"
#cvlc v4l2:///dev/video0  --sout='#transcode{vcodec=h264,vb=512,scale=1,acodec=none,sfilter=marq{marquee="[%d-%m-%Y %H:%M:%S]",position=8,size=18},venc=x264{aud,profile=baseline,level=30,keyint=30,bframes=0,ref=1,nocabac}}:duplicate{dst=std{access=livehttp{seglen=10,delsegs=true,numsegs=5,index=/var/www/streaming/worker0.m3u8,index-url=http://192.168.3.204/streaming/worker0-########.ts},mux=ts{use-key-frames},dst=/var/www/streaming/worker0-########.ts},dst=std{access=http,mux=ts,dst=:8090/video.mp4}}'
#########cvlc v4l2:///dev/video0 --sout='#duplicate{dst="transcode{width=320,height=240,fps=15,vcodec=h264,vb=256,scale=1,acodec=none,sfilter=marq{marquee="[%d-%m-%Y %H:%M:%S]",position=8,size=18},venc=x264{aud,profile=baseline,level=30,keyint=15,min-keyint=15,ref=1,nocabac}}:duplicate{dst=std{access=livehttp{seglen=2,delsegs=false,numsegs=15,index=/var/www/streaming/worker0.m3u8,index-url=http://192.168.3.204/streaming/worker0-########.ts},mux=ts{use-key-frames},dst=/var/www/streaming/worker0-########.ts},dst=std{access=http,mux=ts,dst=:8090/video.mp4}",dst="transcode{fps=15,vcodec=MJPG}:standard{access=http{mime=multipart/x-mixed-replace;boundary=--7b3cc56e5f51db803f790dad720ed50a},mux=mpjpeg,dst=192.168.3.204:8091/video.mjpg"}}'
cvlc v4l2:///dev/video0 --sout='#duplicate{dst="transcode{width=320,height=240,fps=15,vcodec=h264,vb=256,scale=1,sfilter=marq{marquee=[%d-%m-%Y %H:%M:%S],position=8,size=18},acodec=none,venc=x264{aud,profile=baseline,level=30,keyint=15,min-keyint=15,ref=1,nocabac}}:duplicate{dst=std{access=livehttp{seglen=2,delsegs=false,numsegs=15,index=/var/www/streaming/worker0.m3u8,index-url=http://192.168.3.204/streaming/worker0-########.ts},mux=ts{use-key-frames},dst=/var/www/streaming/worker0-########.ts},dst=std{access=http,mux=ts,dst=:8090/video.mp4},dst=rtp{dst=192.168.3.204,port=1234,sdp=rtsp://192.168.3.204:8092/video.sdp}}",dst="transcode{fps=15,vcodec=MJPG}:standard{access=http{mime=multipart/x-mixed-replace;boundary=--7b3cc56e5f51db803f790dad720ed50a},mux=mpjpeg,dst=192.168.3.204:8091/video.mjpg"}}'
###cvlc rtsp://192.168.3.204:8554/test --sout='#transcode{width=320,height=240,fps=25,vcodec=h264,vb=256,scale=1,acodec=none,sfilter=marq{marquee="[%d-%m-%Y %H:%M:%S]",position=8,size=18},venc=x264{aud,profile=baseline,level=30,keyint=300,min-keyint=15,ref=1,nocabac}}:duplicate{dst=std{access=livehttp{seglen=2,delsegs=true,numsegs=15,index=/var/www/streaming/worker0.m3u8,index-url=http://192.168.3.204/streaming/worker0-########.ts},mux=ts{use-key-frames},dst=/var/www/streaming/worker0-########.ts},dst=std{access=http,mux=ts,dst=:8090/video.mp4}}'
#cvlc rtsp://192.168.3.204:8554/test --sout='#duplicate{dst=std{access=livehttp{seglen=10,delsegs=true,numsegs=5,index=/var/www/streaming/worker0.m3u8,index-url=http://192.168.3.204/streaming/worker0-########.ts},mux=ts{use-key-frames},dst=/var/www/streaming/worker0-########.ts},dst=std{access=http,mux=ts,dst=:8091/video.mp4}}'
#cvlc rtsp://192.168.3.204:8554/test --sout='#transcode{vcodec=MJPG,sfilter=marq{marquee="[%d-%m-%Y %H:%M:%S]",position=8,size=18},venc=ffmpeg{strict=1}}:duplicate{dst=std{access=livehttp{seglen=10,delsegs=true,numsegs=5,index=/var/www/streaming/worker0.m3u8,index-url=http://192.168.3.204/streaming/worker0-########.ts},mux=ts{use-key-frames},dst=/var/www/streaming/worker0-########.ts},dst=std{access=http,mux=ts,dst=:8090/video.mp4}}'
#cvlc "/tmp/50 percent grey.avi" --sout='#transcode{vcodec=MJPG,sfilter=marq{marquee="[%d-%m-%Y %H:%M:%S]",position=8,size=18},venc=ffmpeg{strict=1}}:duplicate{dst=std{access=livehttp{seglen=10,delsegs=true,numsegs=5,index=/var/www/streaming/worker0.m3u8,index-url=http://192.168.3.204/streaming/worker0-########.ts},dst=/var/www/streaming/worker0-########.ts},dst=std{access=http,mux=ts,dst=:8090/video.mp4}}'
#cvlc -vv rtsp://192.168.3.204:8554/test --sout='#transcode{vcodec=MJPG,venc=ffmpeg}:standard{access=http{mime=image/jpeg},mux=mpjpeg,dst=:18090/video.mjpg}'
#cvlc -vv "/tmp/50 percent grey.avi" --sout='#transcode{vcodec=MJPG,venc=ffmpeg}:standard{access=file,mux=ts,dst=/tmp/video.mjpg}'
#cvlc -vv rtsp://192.168.3.204:8554/test --sout='#transcode{width=640,height=480,fps=15,vcodec=MJPG}:standard{access=http{mime=multipart/x-mixed-replace;boundary=--7b3cc56e5f51db803f790dad720ed50a},mux=mpjpeg,dst=192.168.3.204:18090/video.mjpg}'
#cvlc -vv v4l2:///dev/video0 --sout='#transcode{fps=15,vcodec=MJPG}:standard{access=http{mime=multipart/x-mixed-replace;boundary=--7b3cc56e5f51db803f790dad720ed50a},mux=mpjpeg,dst=192.168.3.204:8090/video.mjpg}'
