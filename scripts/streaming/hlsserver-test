#!/bin/bash
export LD_LIBRARY_PATH="$LD_LIBRARY_PATH:/usr/local/lib"
#cvlc rtsp://192.168.3.204:8554/test --sout='#transcode{vcodec=h264,vb=512,scale=1,acodec=none,sfilter=marq{marquee="[%d-%m-%Y %H:%M:%S]",position=8,size=18},venc=x264{aud,profile=baseline,level=30,keyint=30,bframes=0,ref=1,nocabac}}:duplicate{dst=std{access=livehttp{seglen=10,delsegs=true,numsegs=5,index=/var/www/streaming/worker0.m3u8,index-url=http://192.168.3.204/streaming/worker0-########.ts},mux=ts{use-key-frames},dst=/var/www/streaming/worker0-########.ts},dst=std{access=http,mux=ts,dst=:8090/video.mp4}}'
#cvlc rtsp://192.168.3.204:8554/test --sout='#duplicate{dst=std{access=livehttp{seglen=10,delsegs=true,numsegs=5,index=/var/www/streaming/worker0.m3u8,index-url=http://192.168.3.204/streaming/worker0-########.ts},mux=ts{use-key-frames},dst=/var/www/streaming/worker0-########.ts},dst=std{access=http,mux=ts,dst=:8090/video.mp4}}'
#cvlc rtsp://192.168.3.204:8554/test --sout='#transcode{vcodec=MJPG,sfilter=marq{marquee="[%d-%m-%Y %H:%M:%S]",position=8,size=18},venc=ffmpeg{strict=1}}:duplicate{dst=std{access=livehttp{seglen=10,delsegs=true,numsegs=5,index=/var/www/streaming/worker0.m3u8,index-url=http://192.168.3.204/streaming/worker0-########.ts},mux=ts{use-key-frames},dst=/var/www/streaming/worker0-########.ts},dst=std{access=http,mux=ts,dst=:8090/video.mp4}}'
#cvlc "/tmp/50 percent grey.avi" --sout='#transcode{vcodec=MJPG,sfilter=marq{marquee="[%d-%m-%Y %H:%M:%S]",position=8,size=18},venc=ffmpeg{strict=1}}:duplicate{dst=std{access=livehttp{seglen=10,delsegs=true,numsegs=5,index=/var/www/streaming/worker0.m3u8,index-url=http://192.168.3.204/streaming/worker0-########.ts},dst=/var/www/streaming/worker0-########.ts},dst=std{access=http,mux=ts,dst=:8090/video.mp4}}'
#cvlc -vv "/tmp/50 percent grey.avi" --sout='#transcode{vcodec=MJPG,venc=ffmpeg}:standard{access=http{mime=image/jpeg},mux=mpjpeg,dst=:18090/video.mjpg}'
cvlc -vv "/tmp/50 percent grey.avi" --sout='#transcode{vcodec=MJPG,venc=ffmpeg}:standard{access=file,mux=ts,dst=/tmp/video.mjpg}'
#cvlc -vv rtsp://192.168.3.204:8554/test --sout='#transcode{vcodec=MJPG}:standard{access=http{mime=multipart/x-mixed-replace;boundary=--myboundary},mux=mpjpeg,dst=192.168.3.204:18090/video.mjpg}'
